---
layout: default
title: Kobalt by Cedric Beust
description: A modern, versatile build system
isHome: true
---

<section class="bs-docs-section">
  <h1 id="overview" class="page-header">Overview</h1>
  
  <blockquote>
    Kobalt is a build system inspired by Gradle and Maven. It reuses the best concepts from these two successful and popular build systems while adding a few modern features of its own.
  </blockquote>

  <h3 id="features">Features</h3>

  <ul class="features">
    <li>Clean, minimal syntax for build files</li>
    <li>Build file auto-completion in your IDE</li>
    <li>Incremental tasks</li>
    <li>Intuitive plug-in architecture</li>
  </ul>
  
  <h3 id="examples">Example: JCommander's entire build file</h3>
  
{% highlight kotlin %}
import com.beust.kobalt.*
import com.beust.kobalt.plugin.java.*
import com.beust.kobalt.plugin.packaging.*
import com.beust.kobalt.plugin.publish.*
 
val jcommander = project {
    name = "jcommander"
    group = "com.beust"
    artifactId = name
    version = "1.52"
 
    dependenciesTest {
        compile("org.testng:testng:6.9.5")
    }
 
    assemble {
        mavenJars {
        }
    }
 
    bintray {
        publish = false
    }
}
{% endhighlight %}

</section>


<section class="bs-docs-section">
  <h1 id="installation" class="page-header">Installation</h1>

  <h3 id="install-jekyll">IntelliJ Plugin</h2>
  <p>The easiest way to get started is to install the IntelliJ plugin. Search for Kobalt in Preferences -> Plugins -> Browse Repositories</p>

  <h3 id="install-jekyll">Command-Line Install</h2>
  <p>If you want to run your tests and builds from the command line, this is currently the most reliable way to install Kobalt.<p>
    <p> Note that you must first install jq.  On MacOS use <code>brew install jq</code> and on Ubuntu try <code>sudo apt-get install jq</code></p>

    <ol>
      <li>Install kobalt</li>
{% highlight bash %}
LATEST_KOBALT_URL=`curl -s https://api.github.com/repos/cbeust/kobalt/releases/latest | jq -r ".assets[0] | .browser_download_url" `
LATEST_KOBALT_ZIP=`echo "$LATEST_KOBALT_URL" | rev | cut -d / -f 1 | rev`
LATEST_KOBALT=`echo "$LATEST_KOBALT_ZIP" | sed 's/.zip//'

mkdir -p ~/.kobalt/wrapper/dist/
cd ~/.kobalt/wrapper/dist/
curl -LO $LATEST_KOBALT_URL
unzip -o $LATEST_KOBALT_ZIP
chmod +x $LATEST_KOBALT/bin/kobaltw
export PATH=~/.kobalt/wrapper/dist/$LATEST_KOBALT/bin:$PATH
{% endhighlight %}
    <li>Go into your project's directory</li>
    <li>Initialize your project as a Kobalt project.  This will install kobaltw (wrapper) in your project and create the <code>kobalt/src/Build.kt</code> file
{% highlight bash %}
kobaltw --init kotlin
{% endhighlight %}
    </li>
    <li>Ensure you've got the Kobalt Intellij plugin installed (v1.110 or better)</li>
    <li>Import into IntelliJ
      <p>File -> New -> Project from existing sources -> (your project's path) -> Import project from external model (Kobalt)
  Select option "use auto-import"</p>
    </li>
    <li>You can now use the refresh/sync icon in the kobalt sidebar tool (shows up on far right, below Maven Projects on my IDE) to get your dependencies configured in IntelliJ.</li>
</ol>

<div class="panel panel-default">
  <div class="panel-heading">Notes</div>
  <div class="panel-body">
    <ul>
      <li> You may get this error message when you first import the project b/c Kotlin will not be configured
          <code>AssertionError: Kotlin library should exists when adding sources root</code>
      <li> This happens because your source folders have been marked as such but you have not yet configured Kotlin java for the project
      <li> You can fix the error by using the configure Kotlin dialog that will usually show up under the error message or by going to tools -> Kotlin -> Configure Kotlin in project
    </ul>
</div>
</div>

</section>


<section class="bs-docs-section">
  <h1 id="usage" class="page-header">Usage</h1>

  <h2 id="pages">Edit kobalt/src/Build.kt</h2>
  <p>Unless your project is new, the build file generated by default will need some editing before you can build, so take a look at it and adjust whatever is necessary (e.g. package name, version, dependencies).</p>

{% highlight html %}
---
layout: default
title: Home
description: Simple documentation template for Github pages
---

<!-- content -->
{% endhighlight %}

  <p>Set <code>isHome</code> to <code>true</code> on the main page file, the homepage will have a bigger header with a central download button.</p>
  
{% highlight html %}
---
..........
isHome: true
---
{% endhighlight %}

  <p>Set <code>hide</code> to <code>true</code> to hide a page from the main menu, the page will still be accessible with direct link. <a href="hidden.html">Example</a>.</p>
  
{% highlight html %}
---
..........
hide: true
---
{% endhighlight %}

  <h2 id="titles">Titles</h2>
  <p>In order to get the right menu automatically generated you must respect some conventions.</p>

{% highlight html %}
<!-- wrap each main section with "bs-docs-section" class -->
<section class="bs-docs-section">
  <!-- each section must contain ONE h1 with an id and optionally a "page-header" class -->
  <h1 id="first-level" class="page-header">First level</h1>

  <!-- you can optionally declare sub-sections with h2/h3 with an id -->
  <h2 id="sub-section">Second level</h2>

  <h3 id="another-sub-section">Still second level</h3>
</section>
{% endhighlight %}

  <h2 id="highlight">Syntax highlight</h2>
  <p>The powerful Pygments highlighter is activated on the template, just wrap your unescaped source code with the <code>{{ "{% highlight ... " }}%}</code> directive.</p>

{% highlight text %}
{{ "{% highlight html " }}%}
<div>Some <b>HTML</b></div>
{{ "{% endhighlight " }}%}

{{ "{% highlight javascript " }}%}
alert('Some javascript');
{{ "{% endhighlight " }}%}
{% endhighlight %}

  <h2 id="resources">Resources &amp; links</h2>
  <p>If you need to create internal links between your pages, or include resources (JS &amp; CSS), always start your URLs with <code>{{ "{{site.github.url" }}}}</code>.</p>

{% highlight html %}
<script src="{{ "{{site.github.url" }}}}/dist/my-script.js"></script>

<a href="{{ "{{site.github.url" }}}}/about/index.html">About</a>
{% endhighlight %}

  <h2 id="bootbox">Bootbox</h2>
  <p><a href="http://bootboxjs.com/">Bootbox</a> is installed with a syntax sugar to easily create pop-in content. To use this sugar you must create a clickable element with a <code>data-bootbox</code> attribute and an hidden content holder with a corresponding <code>id</code> attribute.</p>

{% highlight html %}
<button class="btn btn-primary btn-xs" data-bootbox="my-content">Button title</button>

<div id="my-content" class="hidden" title="Pop-in title">
  Pop-in content
</div>
{% endhighlight %}

  <h2 id="gems">Plugins</h2>
  <p>All available Jekyll plugins are installed by default, you can remove them by modifying the <code>gems</code> parameter in <code>_config.yml</code>. See the documentation on <a href="https://help.github.com/articles/using-jekyll-plugins-with-github-pages/">GitHub Help</a> pages.</p>

  <h2 id="bower">Bower</h2>
  <p>Fell free to use the <code>bower.json</code> to manage your front dependencies. Bower packages are added the <code>dist</code> directory and <b>MUST</b> be pushed to the repository. jQuery and Bootstrap are ignored by <code>.gitignore</code> as already loaded from a CDN.</p>
</section>